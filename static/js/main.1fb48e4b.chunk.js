(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){},108:function(e,t,n){},110:function(e,t,n){},112:function(e,t,n){},117:function(e,t,n){},119:function(e,t,n){},121:function(e,t,n){},123:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),i=n(5),o=n(17),u=(n(73),n(60)),l=n(2),s=n(12),d=n(63),m={addedIds:[],quantityById:{}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.addedIds,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return-1!==e.indexOf(t.productId)?e:[].concat(Object(d.a)(e),[t.productId]);case"REMOVE_CART_ITEM":return-1===e.indexOf(t.productId)?e:e.filter(function(e){return e!==t.productId});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.quantityById,t=arguments.length>1?arguments[1]:void 0,n=t.productId;switch(t.type){case"REMOVE_CART_ITEM":return t.newQuantity=0,Object(l.a)({},e,Object(s.a)({},n,t.newQuantity));case"MODIFY_QUANTITY":return Object(l.a)({},e,Object(s.a)({},n,t.newQuantity));case"ADD_TO_CART":return Object(l.a)({},e,Object(s.a)({},n,(e[n]||0)+1));default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHECKOUT_REQUEST":return m;case"CHECKOUT_FAILURE":return t.cart;default:return{addedIds:p(e.addedIds,t),quantityById:y(e.quantityById,t)}}},v=Object(i.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_PRODUCTS":return Object(l.a)({},e,t.products.reduce(function(e,t){return e[t.id]=t,e},{}));default:var n=t.productId;return n?Object(l.a)({},e,Object(s.a)({},n,function(e,t){switch(t.type){case"UPDATE_INVENTORY":return Object(l.a)({},e,{inventory:t.newInventory});case"ADD_TO_CART":return Object(l.a)({},e,{inventory:e.inventory-1});default:return e}}(e[n],t))):e}},visibleIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_PRODUCTS":return t.products.map(function(e){return e.id});default:return e}}}),h=function(e,t){return e.byId[t]},E=function(e){return e.visibleIds.map(function(t){return h(e,t)})},C=Object(i.c)({cart:f,products:v}),b=function(e){return function(e){return e.addedIds}(e.cart)},O=function(e,t){return function(e,t){return e.quantityById[t]||0}(e.cart,t)},I=function(e,t){return h(e.products,t)},g=function(e){return b(e).reduce(function(t,n){return t+I(e,n).price*O(e,n)},0)},j=function(e){return g(e).toFixed(2)},k=function(e){return.08875*g(e)},N=function(e){return k(e).toFixed(2)},T=function(e){return(g(e)+k(e)).toFixed(2)},w=function(e){return b(e).map(function(t){return Object(l.a)({},I(e,t),{quantity:O(e,t)})})},R=n(61),_=n.n(R),U=function(e,t){_()("http://tech.work.co/shopping-cart/products.json").then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(t){for(var n=[],a=0;a<t.length;a++)n.push({id:t[a].id,title:t[a].productTitle,price:t[a].price.value,inventory:t[a].inventory,image:"/images/".concat(t[a].productTitle.toLowerCase(),".jpg")});e(n)})},A=function(e,t,n){return setTimeout(function(){return t()},n||100)},D=function(e,t){return{type:"UPDATE_INVENTORY",productId:e,newInventory:t}},Q=(n(74),function(e){return"$".concat(e)}),M=(n(106),function(e){var t=e.price,n=e.inventory,a=e.title,c=e.image,i=e.displayInventory,o=e.children;return r.a.createElement("div",{className:"Product"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:c,alt:a})),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"info-title-price"},r.a.createElement("h2",null,a),r.a.createElement("span",{className:"price"},Q(t))),n>=0&&i?r.a.createElement("div",{className:"inventory-wrapper"},r.a.createElement("span",{className:"inventory"},n>0?"".concat(n," Remaining"):"Out of Stock")):null,o))});M.defaultProps={displayInventory:!0};var S=M,q=(n(108),function(e){var t=e.children,n=e.styleName,a=e.disabled,c=e.onClick;return r.a.createElement("button",{className:"Button".concat(n?" "+n:""),onClick:c,disabled:a},t)}),x=(n(110),function(e){var t=e.product,n=e.onAddToCartClicked;return r.a.createElement("div",{className:"ProductItem"},r.a.createElement(S,{title:t.title,price:t.price,inventory:t.inventory,image:t.image},r.a.createElement(q,{styleName:"primary add-to-cart",onClick:n,disabled:0===t.inventory},t.inventory>0?"Add to cart":"Sold Out")))}),P=(n(112),function(e){var t=e.children;return r.a.createElement("div",{className:"ProductsList"},r.a.createElement("div",null,t))}),K=Object(o.b)(function(e){return{products:E(e.products)}},{addToCart:function(e){return function(t,n){n().products.byId[e].inventory>0&&t(function(e){return{type:"ADD_TO_CART",productId:e}}(e))}}})(function(e){var t=e.products,n=e.addToCart;return r.a.createElement(P,{title:"Products"},t.length?t.map(function(e){return r.a.createElement(x,{key:e.id,product:e,onAddToCartClicked:function(){return n(e.id)}})}):r.a.createElement("span",null,"Loading Products..."))}),B=n(7),L=n(8),V=n(11),W=n(9),Y=n(10),z=n(62),F=n.n(z),H=n(4),J=(n(117),function(e){function t(){return Object(B.a)(this,t),Object(V.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"onQuantityChange",value:function(e){(e=parseInt(e,10))&&this.props.modify(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.reserves;return r.a.createElement("div",{className:"CartControl"},r.a.createElement(q,{styleName:"secondary decrease-btn",onClick:function(){return e.onQuantityChange(n-1)},disabled:n-1===0},r.a.createElement("span",{className:"decrease-icon"}),r.a.createElement("span",{className:"hidden"},"Decrease")),r.a.createElement("label",null,r.a.createElement("span",{className:"hidden"},"Quantity:"),r.a.createElement("input",{value:n,onClick:function(e){e.target.select()},onChange:function(t){return e.onQuantityChange(t.target.value)}})),r.a.createElement(q,{styleName:"secondary right",onClick:function(){return e.onQuantityChange(n+1)},disabled:0===a},r.a.createElement("span",{className:"increase-icon"}),r.a.createElement("span",{className:"hidden"},"Increase")))}}]),t}(r.a.Component)),$=(n(119),function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(V.a)(this,Object(W.a)(t).call(this,e))).breakpoint=700,n.cart=r.a.createRef(),n.handleCartResize=n.handleCartResize.bind(Object(H.a)(Object(H.a)(n))),n.renderCartControls=n.renderCartControls.bind(Object(H.a)(Object(H.a)(n))),n.state={cartWidth:0},n}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({cartWidth:e.cart.current.clientWidth})},1),window.addEventListener("resize",this.handleCartResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleCartResize)}},{key:"handleCartResize",value:function(){this.setState({cartWidth:this.cart.current.clientWidth})}},{key:"renderCartControls",value:function(e){var t=this;return r.a.createElement(J,{modify:function(n){t.props.modifyQuantity(e.id,n)},value:e.quantity,reserves:e.inventory})}},{key:"render",value:function(){var e=this,t=this.props,n=t.products,a=t.subtotal,c=t.tax,i=t.total,o=t.onCheckoutClicked,u=t.modifyQuantity,l=this.state.cartWidth,s=n.length>0,d=s?n.map(function(t){return r.a.createElement("div",{className:"cart-item",key:t.id},r.a.createElement(S,{title:t.title,price:t.price,quantity:t.quantity,inventory:t.inventory,image:t.image,displayInventory:!1},l>e.breakpoint?e.renderCartControls(t):null,r.a.createElement(q,{styleName:"text-link remove-btn",onClick:function(){return u(t.id,0)}},"Remove")),l<=e.breakpoint?r.a.createElement(J,{modify:function(n){e.props.modifyQuantity(t.id,n)},value:t.quantity,reserves:t.inventory}):null)}):r.a.createElement("div",{className:"no-items"},r.a.createElement("span",{className:"icon-shopping-cart"}),r.a.createElement("span",null,"Please add some products to your cart."));return r.a.createElement("div",{className:"Cart",ref:this.cart},r.a.createElement("div",{className:"items"},r.a.createElement("h2",null,"Your Cart"),r.a.createElement("div",{className:"cart-items ".concat(s?"column":"row")},d),s&&r.a.createElement("div",{className:"totals"},r.a.createElement("div",{className:"subtotal"},r.a.createElement("span",null,"Subtotal:"),r.a.createElement("span",null,Q(a))),r.a.createElement("div",{className:"tax"},r.a.createElement("span",null,"Tax:"),r.a.createElement("span",null,Q(c))),r.a.createElement("div",{className:"grand-total"},r.a.createElement("span",null,"Total:"),r.a.createElement("span",null,Q(i))))),s&&r.a.createElement(q,{styleName:"primary checkout-btn",onClick:o,disabled:!s},"Checkout"))}}]),t}(r.a.Component)),G=(n(121),function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(V.a)(this,Object(W.a)(t).call(this,e))).el=document.createElement("div"),n.handleKeyUp=n.handleKeyUp.bind(Object(H.a)(Object(H.a)(n))),n.modalRoot=document.getElementById("modal"),n}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"handleKeyUp",value:function(e){var t=this,n=this.props.onCloseRequest,a={27:function(){e.preventDefault(),n(),window.removeEventListener("keyup",t.handleKeyUp,!1)}};a[e.keyCode]&&a[e.keyCode]()}},{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.handleKeyUp,!1),this.modalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.handleKeyUp,!1),this.modalRoot.removeChild(this.el)}},{key:"render",value:function(){return Object(c.createPortal)(this.props.children,this.el)}}]),t}(r.a.Component)),X=(n(123),function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(V.a)(this,(e=Object(W.a)(t)).call.apply(e,[this].concat(r)))).state={showModal:!1},n.toggleModal=function(){return n.setState({showModal:!n.state.showModal})},n}return Object(Y.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.state.showModal,t=this.props,n=t.products,a=t.subtotal,c=t.tax,i=t.total,o=t.checkout,u=t.modifyQuantity,l=n.length>0,s=n.map(function(e){return e.quantity}).reduce(function(e,t){return e+t},0);return r.a.createElement("div",{className:"CartContainer"},r.a.createElement(q,{className:"text-link",onClick:this.toggleModal},r.a.createElement("span",{className:"icon-shopping-cart"}),l?"View Cart (".concat(s,")"):"Your cart is empty"),e?r.a.createElement(G,{onCloseRequest:this.toggleModal},r.a.createElement(F.a,null,r.a.createElement("div",{className:"focus-trap"},r.a.createElement(q,{styleName:"close-cart",onClick:this.toggleModal},r.a.createElement("span",{className:"hidden"},"Close Cart")),r.a.createElement($,{products:n,subtotal:a,tax:c,total:i,onCheckoutClicked:function(){return o(n)},modifyQuantity:u})))):null)}}]),t}(r.a.Component)),Z=Object(o.b)(function(e){return{products:w(e),productInventory:E(e.products),subtotal:j(e),tax:N(e),total:T(e)}},{checkout:function(e){return function(t,n){var a=n().cart;t({type:"CHECKOUT_REQUEST"}),A(e,function(){t({type:"CHECKOUT_SUCCESS",cart:a})})}},modifyQuantity:function(e,t){return function(n,a){var r=a().products.byId[e].inventory,c=a().cart.quantityById[e],i=r+c-t;t>0&&t<=r+c?(n(function(e,t){return{type:"MODIFY_QUANTITY",productId:e,newQuantity:t}}(e,t)),n(D(e,i))):0===t&&(n(function(e){return{type:"REMOVE_CART_ITEM",productId:e}}(e)),n(D(e,i)))}}})(X),ee=(n(125),function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"store-header"},r.a.createElement("h1",null,"Acme Store"),r.a.createElement(Z,null)),r.a.createElement(K,null))}),te=[u.a];var ne=Object(i.d)(C,i.a.apply(void 0,te));ne.dispatch(function(e){U(function(t){e(function(e){return{type:"RECEIVE_PRODUCTS",products:e}}(t))})}),Object(c.render)(r.a.createElement(o.a,{store:ne},r.a.createElement(ee,null)),document.getElementById("root"))},64:function(e,t,n){e.exports=n(127)}},[[64,2,1]]]);
//# sourceMappingURL=main.1fb48e4b.chunk.js.map