(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){},108:function(e,t,n){},110:function(e,t,n){},112:function(e,t,n){},117:function(e,t,n){},119:function(e,t,n){},121:function(e,t,n){},123:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),o=n(4),i=n(14),u=(n(73),n(60)),l=n(2),s=n(6),d=n(63),m={addedIds:[],quantityById:{}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.addedIds,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":return-1!==e.indexOf(t.productId)?e:[].concat(Object(d.a)(e),[t.productId]);case"REMOVE_CART_ITEM":return-1===e.indexOf(t.productId)?e:e.filter(function(e){return e!==t.productId});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.quantityById,t=arguments.length>1?arguments[1]:void 0,n=t.productId;switch(t.type){case"REMOVE_CART_ITEM":return t.newQuantity=0,Object(l.a)({},e,Object(s.a)({},n,t.newQuantity));case"MODIFY_QUANTITY":return Object(l.a)({},e,Object(s.a)({},n,t.newQuantity));case"ADD_TO_CART":return Object(l.a)({},e,Object(s.a)({},n,(e[n]||0)+1));default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHECKOUT_REQUEST":return m;case"CHECKOUT_FAILURE":return t.cart;default:return{addedIds:p(e.addedIds,t),quantityById:y(e.quantityById,t)}}},v=Object(o.c)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_PRODUCTS":return Object(l.a)({},e,t.products.reduce(function(e,t){return e[t.id]=t,e},{}));default:var n=t.productId;return n?Object(l.a)({},e,Object(s.a)({},n,function(e,t){switch(t.type){case"UPDATE_INVENTORY":return Object(l.a)({},e,{inventory:t.newInventory});case"ADD_TO_CART":return Object(l.a)({},e,{inventory:e.inventory-1});default:return e}}(e[n],t))):e}},visibleIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_PRODUCTS":return t.products.map(function(e){return e.id});default:return e}}}),E=function(e,t){return e.byId[t]},h=function(e){return e.visibleIds.map(function(t){return E(e,t)})},C=Object(o.c)({cart:f,products:v}),b=function(e){return function(e){return e.addedIds}(e.cart)},O=function(e,t){return function(e,t){return e.quantityById[t]||0}(e.cart,t)},I=function(e,t){return E(e.products,t)},g=function(e){return b(e).reduce(function(t,n){return t+I(e,n).price*O(e,n)},0)},N=function(e){return g(e).toFixed(2)},j=function(e){return.08875*g(e)},k=function(e){return j(e).toFixed(2)},T=function(e){return(g(e)+j(e)).toFixed(2)},w=function(e){return b(e).map(function(t){return Object(l.a)({},I(e,t),{quantity:O(e,t)})})},R=n(61),_=n.n(R),A=function(e,t){_()("http://tech.work.co/shopping-cart/products.json").then(function(e){return e.json()},function(e){return console.log("An error occurred.",e)}).then(function(t){for(var n=[],a=0;a<t.length;a++)n.push({id:t[a].id,title:t[a].productTitle,price:t[a].price.value,inventory:t[a].inventory,image:"/images/".concat(t[a].productTitle.toLowerCase(),".jpg")});e(n)})},U=function(e,t,n){return setTimeout(function(){return t()},n||100)},D=function(e,t){return{type:"UPDATE_INVENTORY",productId:e,newInventory:t}},M=(n(74),function(e){return"$".concat(e)}),Q=(n(106),function(e){var t=e.price,n=e.inventory,a=e.title,c=e.image,o=e.displayInventory,i=e.children;return r.a.createElement("div",{className:"Product"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:c,alt:a})),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"info-title-price"},r.a.createElement("h2",null,a),r.a.createElement("span",{className:"price"},M(t))),n>=0&&o?r.a.createElement("div",{className:"inventory-wrapper"},r.a.createElement("span",{className:"inventory"},n>0?"".concat(n," Remaining"):"Out of Stock")):null,i))});Q.defaultProps={displayInventory:!0};var x=Q,q=(n(108),function(e){var t=e.children,n=e.styleName,a=e.disabled,c=e.onClick;return r.a.createElement("button",{className:"Button".concat(n?" "+n:""),onClick:c,disabled:a},t)}),P=(n(110),function(e){var t=e.product,n=e.onAddToCartClicked;return r.a.createElement("div",{className:"ProductItem"},r.a.createElement(x,{title:t.title,price:t.price,inventory:t.inventory,image:t.image},r.a.createElement(q,{styleName:"primary add-to-cart",onClick:n,disabled:0===t.inventory},t.inventory>0?"Add to cart":"Sold Out")))}),S=(n(112),function(e){var t=e.children;return r.a.createElement("div",{className:"ProductsList"},r.a.createElement("div",null,t))}),K=Object(i.b)(function(e){return{products:h(e.products)}},{addToCart:function(e){return function(t,n){n().products.byId[e].inventory>0&&t(function(e){return{type:"ADD_TO_CART",productId:e}}(e))}}})(function(e){var t=e.products,n=e.addToCart;return r.a.createElement(S,{title:"Products"},t.length?t.map(function(e){return r.a.createElement(P,{key:e.id,product:e,onAddToCartClicked:function(){return n(e.id)}})}):r.a.createElement("span",null,"Loading Products..."))}),B=n(11),V=n(12),Y=n(16),L=n(13),F=n(15),H=n(62),J=n.n(H),W=(n(117),function(e){function t(){return Object(B.a)(this,t),Object(Y.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(V.a)(t,[{key:"onQuantityChange",value:function(e){(e=parseInt(e,10))&&this.props.modify(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=t.reserves;return r.a.createElement("div",{className:"CartControl"},r.a.createElement(q,{styleName:"secondary decrease-btn",onClick:function(){return e.onQuantityChange(n-1)},disabled:n-1===0},r.a.createElement("span",{className:"decrease-icon"}),r.a.createElement("span",{className:"hidden"},"Decrease")),r.a.createElement("label",null,r.a.createElement("span",{className:"hidden"},"Quantity:"),r.a.createElement("input",{value:n,onClick:function(e){e.target.select()},onChange:function(t){return e.onQuantityChange(t.target.value)}})),r.a.createElement(q,{styleName:"secondary right",onClick:function(){return e.onQuantityChange(n+1)},disabled:0===a},r.a.createElement("span",{className:"increase-icon"}),r.a.createElement("span",{className:"hidden"},"Increase")))}}]),t}(r.a.Component)),$=(n(119),function(e){var t=e.products,n=e.subtotal,a=e.tax,c=e.total,o=e.onCheckoutClicked,i=e.modifyQuantity,u=t.length>0,l=u?t.map(function(e){return r.a.createElement("div",{className:"cart-item",key:e.id},r.a.createElement(x,{title:e.title,price:e.price,quantity:e.quantity,inventory:e.inventory,image:e.image,displayInventory:!1},r.a.createElement(q,{styleName:"text-link remove-btn",onClick:function(){return i(e.id,0)}},"Remove")),r.a.createElement(W,{modify:function(t){i(e.id,t)},value:e.quantity,reserves:e.inventory}))}):r.a.createElement("div",{className:"no-items"},r.a.createElement("span",{className:"icon-shopping-cart"}),r.a.createElement("span",null,"Please add some products to your cart."));return r.a.createElement("div",{className:"Cart"},r.a.createElement("div",{className:"items"},r.a.createElement("h2",null,"Your Cart"),r.a.createElement("div",{className:"cart-items ".concat(u?"column":"row")},l),u&&r.a.createElement("div",{className:"totals"},r.a.createElement("div",{className:"subtotal"},r.a.createElement("span",null,"Subtotal:"),r.a.createElement("span",null,M(n))),r.a.createElement("div",{className:"tax"},r.a.createElement("span",null,"Tax:"),r.a.createElement("span",null,M(a))),r.a.createElement("div",{className:"grand-total"},r.a.createElement("span",null,"Total:"),r.a.createElement("span",null,M(c))))),u&&r.a.createElement(q,{styleName:"primary checkout-btn",onClick:o,disabled:!u},"Checkout"))}),z=n(25),G=(n(121),function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(Y.a)(this,Object(L.a)(t).call(this,e))).el=document.createElement("div"),n.handleKeyUp=n.handleKeyUp.bind(Object(z.a)(Object(z.a)(n))),n.modalRoot=document.getElementById("modal"),n}return Object(F.a)(t,e),Object(V.a)(t,[{key:"handleKeyUp",value:function(e){var t=this,n=this.props.onCloseRequest,a={27:function(){e.preventDefault(),n(),window.removeEventListener("keyup",t.handleKeyUp,!1)}};a[e.keyCode]&&a[e.keyCode]()}},{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.handleKeyUp,!1),this.modalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.handleKeyUp,!1),this.modalRoot.removeChild(this.el)}},{key:"render",value:function(){return Object(c.createPortal)(this.props.children,this.el)}}]),t}(r.a.Component)),X=(n(123),function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(Y.a)(this,(e=Object(L.a)(t)).call.apply(e,[this].concat(r)))).state={showModal:!1},n.toggleModal=function(){return n.setState({showModal:!n.state.showModal})},n}return Object(F.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.state.showModal,t=this.props,n=t.products,a=t.subtotal,c=t.tax,o=t.total,i=t.checkout,u=t.modifyQuantity,l=n.length>0,s=n.map(function(e){return e.quantity}).reduce(function(e,t){return e+t},0);return r.a.createElement("div",{className:"CartContainer"},r.a.createElement(q,{className:"text-link",onClick:this.toggleModal},r.a.createElement("span",{className:"icon-shopping-cart"}),l?"View Cart (".concat(s,")"):"Your cart is empty"),e?r.a.createElement(G,{onCloseRequest:this.toggleModal},r.a.createElement(J.a,null,r.a.createElement("div",{className:"focus-trap"},r.a.createElement(q,{styleName:"close-cart",onClick:this.toggleModal},r.a.createElement("span",{className:"hidden"},"Close Cart")),r.a.createElement($,{products:n,subtotal:a,tax:c,total:o,onCheckoutClicked:function(){return i(n)},modifyQuantity:u})))):null)}}]),t}(r.a.Component)),Z=Object(i.b)(function(e){return{products:w(e),productInventory:h(e.products),subtotal:N(e),tax:k(e),total:T(e)}},{checkout:function(e){return function(t,n){var a=n().cart;t({type:"CHECKOUT_REQUEST"}),U(e,function(){t({type:"CHECKOUT_SUCCESS",cart:a})})}},modifyQuantity:function(e,t){return function(n,a){var r=a().products.byId[e].inventory,c=a().cart.quantityById[e],o=r+c-t;t>0&&t<=r+c?(n(function(e,t){return{type:"MODIFY_QUANTITY",productId:e,newQuantity:t}}(e,t)),n(D(e,o))):0===t&&(n(function(e){return{type:"REMOVE_CART_ITEM",productId:e}}(e)),n(D(e,o)))}}})(X),ee=(n(125),function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"store-header"},r.a.createElement("h1",null,"Acme Store"),r.a.createElement(Z,null)),r.a.createElement(K,null))}),te=[u.a];var ne=Object(o.d)(C,o.a.apply(void 0,te));ne.dispatch(function(e){A(function(t){e(function(e){return{type:"RECEIVE_PRODUCTS",products:e}}(t))})}),Object(c.render)(r.a.createElement(i.a,{store:ne},r.a.createElement(ee,null)),document.getElementById("root"))},64:function(e,t,n){e.exports=n(127)}},[[64,2,1]]]);
//# sourceMappingURL=main.eb54991c.chunk.js.map